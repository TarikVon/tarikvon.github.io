<!doctypehtml><html lang=zh-CN><meta charset=UTF-8><meta content=width=device-width name=viewport><meta content=#222 name=theme-color><meta content="Hexo 7.0.0" name=generator><link href=/images/apple-touch-icon-von.png rel=apple-touch-icon sizes=180x180><link href=/images/von-32x32-next.png rel=icon sizes=32x32 type=image/png><link href=/images/von-16x16-next.png rel=icon sizes=16x16 type=image/png><link color=#222 href=/images/apple-touch-icon-von.png rel=mask-icon><link href=/css/main.css rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css integrity=sha256-CTSx/A06dm1B063156EVh15m6Y67pAjZZaQc89LLSrU= rel=stylesheet><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css integrity=sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE= rel=stylesheet><script class=next-config data-name=main type=application/json>{"hostname":"www.tarikvon.cn","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.18.2","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"}}</script><script src=/js/config.js></script><meta content="OVERTURE 指令集是游戏图灵完备（Turing Complete）中的第一款虚拟计算机所使用的指令集。这里将描述 OVERTURE 指令集，为实际的 CPU 设计做参考。该指令集共有 16 条指令、2 条可选的拓展指令。" name=description><meta content=article property=og:type><meta content=OVERTURE指令集一览表（共18条）及汇编器 property=og:title><meta content=http://www.tarikvon.cn/2024/05/26/OVERTURE/index.html property=og:url><meta content="Von's Blog" property=og:site_name><meta content="OVERTURE 指令集是游戏图灵完备（Turing Complete）中的第一款虚拟计算机所使用的指令集。这里将描述 OVERTURE 指令集，为实际的 CPU 设计做参考。该指令集共有 16 条指令、2 条可选的拓展指令。" property=og:description><meta content=zh_CN property=og:locale><meta content=2024-05-26T05:16:34.000Z property=article:published_time><meta content=2024-05-26T08:32:12.021Z property=article:modified_time><meta content="Tarik Von" property=article:author><meta content=Assembly property=article:tag><meta content=Architecture property=article:tag><meta content=Programming property=article:tag><meta content=CPU property=article:tag><meta content=OVERTURE property=article:tag><meta content=summary name=twitter:card><link href=http://www.tarikvon.cn/2024/05/26/OVERTURE/ rel=canonical><script class=next-config data-name=page type=application/json>{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"http://www.tarikvon.cn/2024/05/26/OVERTURE/","path":"2024/05/26/OVERTURE/","title":"OVERTURE指令集一览表（共18条）及汇编器"}</script><script class=next-config data-name=calendar type=application/json>""</script><title>OVERTURE指令集一览表（共18条）及汇编器 | Von's Blog</title><script src=/js/third-party/analytics/baidu-analytics.js></script><script async src=https://hm.baidu.com/hm.js?82f83f20674b422f119ed5514b2b3c7d></script><script async src=/lib/fireworks.js></script><noscript><link href=/css/noscript.css rel=stylesheet></noscript><!-- hexo injector head_end start --><link href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css rel=stylesheet><link href=https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css rel=stylesheet><!-- hexo injector head_end end --><body class=use-motion itemscope itemtype=http://schema.org/WebPage><div class=headband></div><main class=main><div class=column><header class=header itemscope itemtype=http://schema.org/WPHeader><div class=site-brand-container><div class=site-nav-toggle><div aria-label=切换导航栏 class=toggle role=button><span class=toggle-line></span><span class=toggle-line></span><span class=toggle-line></span></div></div><div class=site-meta><a class=brand href=/ rel=start> <i class=logo-line></i> <p class=site-title>Von's Blog</p> <i class=logo-line></i> </a><p class=site-subtitle itemprop=description>冯格列斯酒馆绝赞营业中~</div><div class=site-nav-right><div class="toggle popup-trigger" aria-label=搜索 role=button></div></div></div><nav class=site-nav><ul class="main-menu menu"><li class="menu-item menu-item-home"><a href=/ rel=section><i class="fa fa-home fa-fw"></i>首页</a><li class="menu-item menu-item-about"><a href=/about/ rel=section><i class="fa fa-user fa-fw"></i>关于</a><li class="menu-item menu-item-tags"><a href=/tags/ rel=section><i class="fa fa-tags fa-fw"></i>标签</a><li class="menu-item menu-item-categories"><a href=/categories/ rel=section><i class="fa fa-th fa-fw"></i>分类</a><li class="menu-item menu-item-archives"><a href=/archives/ rel=section><i class="fa fa-archive fa-fw"></i>归档</a><li class="menu-item menu-item-tools"><a href=/tools/ rel=section><i class="fa fa-toolbox fa-fw"></i>工具箱</a></ul></nav></header><aside class=sidebar><div class="sidebar-inner sidebar-nav-active sidebar-toc-active"><ul class=sidebar-nav><li class=sidebar-nav-toc>文章目录<li class=sidebar-nav-overview>站点概览</ul><div class=sidebar-panel-container><!--noindex--><div class="post-toc-wrap sidebar-panel"><div class="post-toc animated"><ol class=nav><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%A6%82%E8%BF%B0><span class=nav-number>1.</span> <span class=nav-text> 概述</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%8C%87%E4%BB%A4%E9%9B%86%E6%8F%8F%E8%BF%B0><span class=nav-number>2.</span> <span class=nav-text> 指令集描述</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E5%AF%84%E5%AD%98%E5%99%A8><span class=nav-number>3.</span> <span class=nav-text> 寄存器</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E8%AE%A1%E7%AE%97%E5%91%BD%E4%BB%A4><span class=nav-number>4.</span> <span class=nav-text> 计算命令</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%AF%94%E8%BE%83%E5%91%BD%E4%BB%A4><span class=nav-number>5.</span> <span class=nav-text> 比较命令</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%8B%93%E5%B1%95%E5%AF%BB%E5%9D%80%E7%A9%BA%E9%97%B4><span class=nav-number>6.</span> <span class=nav-text> 拓展寻址空间</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%8B%93%E5%B1%95%E6%8C%87%E4%BB%A4><span class=nav-number>7.</span> <span class=nav-text> 拓展指令</span></a><li class="nav-item nav-level-1"><a class=nav-link href=#%E6%B1%87%E7%BC%96%E5%99%A8python><span class=nav-number>8.</span> <span class=nav-text> 汇编器（Python）</span></a></ol></div></div><!--/noindex--><div class="site-overview-wrap sidebar-panel"><div class="site-author animated" itemprop=author itemscope itemtype=http://schema.org/Person><img alt="Tarik Von" class=site-author-image itemprop=image src=http://q.qlogo.cn/headimg_dl?dst_uin=2758557228&spec=640&img_type=jpg><p class=site-author-name itemprop=name>Tarik Von<div class=site-description itemprop=description></div></div><div class="site-state-wrap animated"><nav class=site-state><div class="site-state-item site-state-posts"><a href=/archives/> <span class=site-state-item-count>13</span> <span class=site-state-item-name>日志</span> </a></div><div class="site-state-item site-state-categories"><a href=/categories/> <span class=site-state-item-count>5</span> <span class=site-state-item-name>分类</span></a></div><div class="site-state-item site-state-tags"><a href=/tags/> <span class=site-state-item-count>45</span> <span class=site-state-item-name>标签</span></a></div></nav></div><div class="links-of-author animated"><span class=links-of-author-item> <a rel="noopener me" title="GitHub → https://github.com/TarikVon" href=https://github.com/TarikVon target=_blank><i class="fab fa-github fa-fw"></i>GitHub</a> </span><span class=links-of-author-item> <a rel="noopener me" title="Bilibili → https://space.bilibili.com/133633241" href=https://space.bilibili.com/133633241 target=_blank><i class="fab fa-bilibili fa-fw"></i>Bilibili</a> </span><span class=links-of-author-item> <a rel="noopener me" title="Twitter → https://twitter.com/Tarik_Von" href=https://twitter.com/Tarik_Von target=_blank><i class="fab fa-twitter fa-fw"></i>Twitter</a> </span><span class=links-of-author-item> <a rel="noopener me" title="YouTube → https://www.youtube.com/@TarikVon" href=https://www.youtube.com/@TarikVon target=_blank><i class="fab fa-youtube fa-fw"></i>YouTube</a> </span></div></div></div><div><iframe border=0 frameborder=no height=86 marginheight=0 marginwidth=0 src=https://music.163.com/outchain/player?type=2&id=1398802958&auto=0&height=66 width=330></iframe><script async src=https://rf.revolvermaps.com/0/0/8.js?i=5vuqjbxfa40&m=7&c=ff0000&cr1=ffffff&f=arial&l=33></script></div></div></aside></div><div class="main-inner post posts-expand"><div class=post-block><article class=post-content itemscope itemtype=http://schema.org/Article lang=zh-CN><link href=http://www.tarikvon.cn/2024/05/26/OVERTURE/ itemprop=mainEntityOfPage><span hidden itemprop=author itemscope itemtype=http://schema.org/Person> <meta content=http://q.qlogo.cn/headimg_dl?dst_uin=2758557228&spec=640&img_type=jpg itemprop=image> <meta content="Tarik Von" itemprop=name> </span><span hidden itemprop=publisher itemscope itemtype=http://schema.org/Organization> <meta content="Von's Blog" itemprop=name> <meta itemprop=description> </span><span hidden itemprop=post itemscope itemtype=http://schema.org/CreativeWork> <meta content="OVERTURE指令集一览表（共18条）及汇编器 | Von's Blog" itemprop=name> <meta itemprop=description> </span><header class=post-header><h1 itemprop="name headline" class=post-title>OVERTURE指令集一览表（共18条）及汇编器</h1><div class=post-meta-container><div class=post-meta><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-calendar"></i> </span> <span class=post-meta-item-text>发表于</span> <time itemprop="dateCreated datePublished" title="创建时间：2024-05-26 13:16:34 / 修改时间：16:32:12" datetime=2024-05-26T13:16:34+08:00>2024-05-26</time> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="far fa-folder"></i> </span> <span class=post-meta-item-text>分类于</span> <span itemprop=about itemscope itemtype=http://schema.org/Thing> <a href=/categories/notes/ itemprop=url rel=index><span itemprop=name>notes</span></a> </span> </span><span class=post-meta-item title=本文字数> <span class=post-meta-item-icon> <i class="far fa-file-word"></i> </span> <span class=post-meta-item-text>本文字数：</span> <span>1.5k</span> </span><span class=post-meta-item title=阅读时长> <span class=post-meta-item-icon> <i class="far fa-clock"></i> </span> <span class=post-meta-item-text>阅读时长 ≈</span> <span>5 分钟</span> </span></div></div></header><div class=post-body itemprop=articleBody><h1 id=概述><a class=markdownIt-Anchor href=#概述></a> 概述</h1><p>OVERTURE 指令集是游戏图灵完备（Turing Complete）中的第一款虚拟计算机所使用的指令集。这里将描述 OVERTURE 指令集，为实际的 CPU 设计做参考。该指令集共有 16 条指令、2 条可选的拓展指令。<blockquote><p><s>我从来没觉得当肉编器开心过...</s></blockquote><!-- more --><h1 id=指令集描述><a class=markdownIt-Anchor href=#指令集描述></a> 指令集描述</h1><table border=1><tr><th align=center>B7<th align=center>B6<th align=center>B5<th align=center>B4<th align=center>B3<th align=center>B2<th align=center>B1<th align=center>B0<th align=center>Type<tr><td align=center colspan=2>00<td align=center colspan=6>uint6_t immediate<td align=center>Immediate<tr><td align=center colspan=2>01<td align=center colspan=3>XXX<td align=center colspan=3>Opcode<td align=center>Compute<tr><td align=center colspan=2>10<td align=center colspan=3>Source Reg<td align=center colspan=3>Dest Reg<td align=center>Copy<tr><td align=center colspan=2>11<td align=center colspan=3>XXX<td align=center colspan=3>Opcode<td align=center>Compare</table><p>OVERTURE 指令集如上图所示，分为 4 部分，分别为：<ul><li>立即数模式。低 6 位数据作为立即数写入 Reg0。通过立即数可以写入 0~63 的字面值。<li>计算模式。通过低 3 位选择运算类型。从 Reg1 和 Reg2 中读取数值并将计算结果保存在 Reg3。可能的运算有 OR, NAND, NOR, AND, ADD, SUB。<li>复制模式。将源寄存器（Source Reg）的值复制到目的寄存器（Dest Reg）。<li>比较模式。也称跳转模式。读取 Reg3 中的值并和指定的条件比较。条件满足时跳转到 Reg0 的位置。Reg0 内的值不能为 0（用作指示器）。</ul><h1 id=寄存器><a class=markdownIt-Anchor href=#寄存器></a> 寄存器</h1><p>OVERTURE 指令集架构可以最多控制 8 个寄存器/设备。在图灵完备游戏中，Reg0~Reg5 为通用寄存器，Reg6 为 IO 设备。<h1 id=计算命令><a class=markdownIt-Anchor href=#计算命令></a> 计算命令</h1><table><thead><tr><th style=text-align:center>Type Code<th style=text-align:center>Don't Care<th style=text-align:center>Opcode<th style=text-align:center>Operation<tbody><tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>000<td style=text-align:center>OR<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>001<td style=text-align:center>NAND<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>010<td style=text-align:center>NOR<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>011<td style=text-align:center>AND<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>100<td style=text-align:center>ADD<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>101<td style=text-align:center>SUB</table><h1 id=比较命令><a class=markdownIt-Anchor href=#比较命令></a> 比较命令</h1><table><thead><tr><th style=text-align:center>Type Code<th style=text-align:center>Don't Care<th style=text-align:center>Opcode<th style=text-align:center>Operation<tbody><tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>000<td style=text-align:center>Never<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>001<td style=text-align:center>=0<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>010<td style=text-align:center>&LT0<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>011<td style=text-align:center><=0<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>100<td style=text-align:center>Always<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>101<td style=text-align:center>!=0<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>110<td style=text-align:center>>=0<tr><td style=text-align:center>11<td style=text-align:center>000<td style=text-align:center>111<td style=text-align:center>>0</table><h1 id=拓展寻址空间><a class=markdownIt-Anchor href=#拓展寻址空间></a> 拓展寻址空间</h1><p>目前 PC 的寻址空间为 255byte。为了增加实用性，增加一条规定：<ul><li>程序跳转时，如果 Reg0 中的值为 0，那么选择跳转到 Reg1（低 8 位）和 Reg2（高 8 位）指示的位置。<br> 通过增加地址位数，可以获得 65kbyte 的寻址空间。</ul><h1 id=拓展指令><a class=markdownIt-Anchor href=#拓展指令></a> 拓展指令</h1><p>这部分是在 OVERTURE 指令集基础上拓展的指令，增加了对 RAM 的读写操作，使得整个系统更加实用。<ul><li>计算模式下的内存指令。把 Reg3 处的值存储在 RAM 中 Reg0 所指示的位置。或者把 Reg0 所指示的位置的 RAM 值读取到 Reg3 处。</ul><table><thead><tr><th style=text-align:center>Type Code<th style=text-align:center>Don't Care<th style=text-align:center>Opcode<th style=text-align:center>Operation<tbody><tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>110<td style=text-align:center>Store Word<tr><td style=text-align:center>01<td style=text-align:center>000<td style=text-align:center>111<td style=text-align:center>Load Word</table><ul><li>如果 Reg0 中的值为 0，那么选择 Reg1（低 8 位）和 Reg2（高 8 位）作为 RAM 的地址。</ul><h1 id=汇编器python><a class=markdownIt-Anchor href=#汇编器python></a> 汇编器（Python）</h1><figure class="highlight python"><table><tr><td class=gutter><pre><span class=line>1</span><br><span class=line>2</span><br><span class=line>3</span><br><span class=line>4</span><br><span class=line>5</span><br><span class=line>6</span><br><span class=line>7</span><br><span class=line>8</span><br><span class=line>9</span><br><span class=line>10</span><br><span class=line>11</span><br><span class=line>12</span><br><span class=line>13</span><br><span class=line>14</span><br><span class=line>15</span><br><span class=line>16</span><br><span class=line>17</span><br><span class=line>18</span><br><span class=line>19</span><br><span class=line>20</span><br><span class=line>21</span><br><span class=line>22</span><br><span class=line>23</span><br><span class=line>24</span><br><span class=line>25</span><br><span class=line>26</span><br><span class=line>27</span><br><span class=line>28</span><br><span class=line>29</span><br><span class=line>30</span><br><span class=line>31</span><br><span class=line>32</span><br><span class=line>33</span><br><span class=line>34</span><br><span class=line>35</span><br><span class=line>36</span><br><span class=line>37</span><br><span class=line>38</span><br><span class=line>39</span><br><span class=line>40</span><br><span class=line>41</span><br><span class=line>42</span><br><span class=line>43</span><br><span class=line>44</span><br><span class=line>45</span><br><span class=line>46</span><br><span class=line>47</span><br><span class=line>48</span><br><span class=line>49</span><br><span class=line>50</span><br><span class=line>51</span><br><span class=line>52</span><br><span class=line>53</span><br><span class=line>54</span><br><span class=line>55</span><br><span class=line>56</span><br><span class=line>57</span><br><span class=line>58</span><br><span class=line>59</span><br><span class=line>60</span><br><span class=line>61</span><br><span class=line>62</span><br><span class=line>63</span><br><span class=line>64</span><br><span class=line>65</span><br><span class=line>66</span><br><span class=line>67</span><br><span class=line>68</span><br><span class=line>69</span><br><span class=line>70</span><br><span class=line>71</span><br><span class=line>72</span><br><span class=line>73</span><br><span class=line>74</span><br><span class=line>75</span><br><span class=line>76</span><br><span class=line>77</span><br><span class=line>78</span><br><span class=line>79</span><br><span class=line>80</span><br><span class=line>81</span><br><span class=line>82</span><br><span class=line>83</span><br><span class=line>84</span><br><span class=line>85</span><br><span class=line>86</span><br><span class=line>87</span><br><span class=line>88</span><br><span class=line>89</span><br><span class=line>90</span><br><span class=line>91</span><br><span class=line>92</span><br><span class=line>93</span><br><span class=line>94</span><br><span class=line>95</span><br><span class=line>96</span><br><span class=line>97</span><br><span class=line>98</span><br><span class=line>99</span><br><span class=line>100</span><br><span class=line>101</span><br><span class=line>102</span><br><span class=line>103</span><br><span class=line>104</span><br><span class=line>105</span><br><span class=line>106</span><br><span class=line>107</span><br><span class=line>108</span><br><span class=line>109</span><br><span class=line>110</span><br><span class=line>111</span><br><span class=line>112</span><br><span class=line>113</span><br><span class=line>114</span><br><span class=line>115</span><br><span class=line>116</span><br><span class=line>117</span><br><span class=line>118</span><br><span class=line>119</span><br><span class=line>120</span><br><span class=line>121</span><br><span class=line>122</span><br><span class=line>123</span><br><span class=line>124</span><br><span class=line>125</span><br><span class=line>126</span><br><span class=line>127</span><br><span class=line>128</span><br><span class=line>129</span><br><span class=line>130</span><br><span class=line>131</span><br><span class=line>132</span><br><span class=line>133</span><br><span class=line>134</span><br><span class=line>135</span><br><span class=line>136</span><br><span class=line>137</span><br><span class=line>138</span><br><span class=line>139</span><br><span class=line>140</span><br><span class=line>141</span><br><span class=line>142</span><br><span class=line>143</span><br><span class=line>144</span><br><span class=line>145</span><br><span class=line>146</span><br><span class=line>147</span><br><span class=line>148</span><br><span class=line>149</span><br><span class=line>150</span><br><span class=line>151</span><br><span class=line>152</span><br><span class=line>153</span><br><span class=line>154</span><br><span class=line>155</span><br><span class=line>156</span><br><span class=line>157</span><br><span class=line>158</span><br><span class=line>159</span><br><span class=line>160</span><br><span class=line>161</span><br><span class=line>162</span><br><span class=line>163</span><br><span class=line>164</span><br><span class=line>165</span><br><span class=line>166</span><br><span class=line>167</span><br><span class=line>168</span><br><span class=line>169</span><br><span class=line>170</span><br><span class=line>171</span><br><span class=line>172</span><br><span class=line>173</span><br><span class=line>174</span><br><span class=line>175</span><br><span class=line>176</span><br><span class=line>177</span><br><span class=line>178</span><br><span class=line>179</span><br><span class=line>180</span><br><span class=line>181</span><br><span class=line>182</span><br><span class=line>183</span><br><span class=line>184</span><br><span class=line>185</span><br><span class=line>186</span><br><span class=line>187</span><br><span class=line>188</span><br><span class=line>189</span><br><span class=line>190</span><br><span class=line>191</span><br><span class=line>192</span><br><span class=line>193</span><br><span class=line>194</span><br><span class=line>195</span><br><span class=line>196</span><br><span class=line>197</span><br><span class=line>198</span><br><span class=line>199</span><br><span class=line>200</span><br><span class=line>201</span><br><span class=line>202</span><br><span class=line>203</span><br><span class=line>204</span><br><span class=line>205</span><br><span class=line>206</span><br><span class=line>207</span><br><span class=line>208</span><br><span class=line>209</span><br><span class=line>210</span><br><span class=line>211</span><br><span class=line>212</span><br><span class=line>213</span><br><span class=line>214</span><br><span class=line>215</span><br><span class=line>216</span><br><span class=line>217</span><br><span class=line>218</span><br><span class=line>219</span><br><span class=line>220</span><br><span class=line>221</span><br><span class=line>222</span><br><span class=line>223</span><br><span class=line>224</span><br><span class=line>225</span><br><span class=line>226</span><br><span class=line>227</span><br><span class=line>228</span><br><span class=line>229</span><br><span class=line>230</span><br><span class=line>231</span><br><span class=line>232</span><br><span class=line>233</span><br><span class=line>234</span><br><span class=line>235</span><br><span class=line>236</span><br><span class=line>237</span><br><span class=line>238</span><br><span class=line>239</span><br><span class=line>240</span><br><span class=line>241</span><br><span class=line>242</span><br><span class=line>243</span><br><span class=line>244</span><br><span class=line>245</span><br><span class=line>246</span><br><span class=line>247</span><br><span class=line>248</span><br><span class=line>249</span><br><span class=line>250</span><br><span class=line>251</span><br><span class=line>252</span><br><span class=line>253</span><br><span class=line>254</span><br><span class=line>255</span><br><span class=line>256</span><br><span class=line>257</span><br><span class=line>258</span><br><span class=line>259</span><br><span class=line>260</span><br><span class=line>261</span><br><span class=line>262</span><br><span class=line>263</span><br><span class=line>264</span><br><span class=line>265</span><br><span class=line>266</span><br><span class=line>267</span><br><span class=line>268</span><br><span class=line>269</span><br><span class=line>270</span><br><span class=line>271</span><br><span class=line>272</span><br><span class=line>273</span><br><span class=line>274</span><br><span class=line>275</span><br><span class=line>276</span><br><span class=line>277</span><br><span class=line>278</span><br><span class=line>279</span><br><span class=line>280</span><br><span class=line>281</span><br><span class=line>282</span><br></pre><td class=code><pre><span class=line><span class=string>'''</span></span><br><span class=line><span class=string>The Overture CPU assembler.</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>Author: CoccaGuo</span></span><br><span class=line><span class=string>Date: 2023/07/15</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>Registers:</span></span><br><span class=line><span class=string>t0~t3 temp regs,</span></span><br><span class=line><span class=string>s0~s1 saved regs,</span></span><br><span class=line><span class=string>sp stack ptr,</span></span><br><span class=line><span class=string>io gpio.</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>Instructions:</span></span><br><span class=line><span class=string> - OR</span></span><br><span class=line><span class=string> - NAND</span></span><br><span class=line><span class=string> - NOR</span></span><br><span class=line><span class=string> - AND</span></span><br><span class=line><span class=string> - ADD</span></span><br><span class=line><span class=string> - SUB</span></span><br><span class=line><span class=string> - EQ0</span></span><br><span class=line><span class=string> - LT0</span></span><br><span class=line><span class=string> - LTEQ0</span></span><br><span class=line><span class=string> - JMP</span></span><br><span class=line><span class=string> - NEQ0</span></span><br><span class=line><span class=string> - GTEQ0</span></span><br><span class=line><span class=string> - GT0</span></span><br><span class=line><span class=string> - SW</span></span><br><span class=line><span class=string> - LW</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string> - LABEL name</span></span><br><span class=line><span class=string> - name</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string> - MOV R# R#</span></span><br><span class=line><span class=string> - IMME number</span></span><br><span class=line><span class=string> - #DEFINE name const</span></span><br><span class=line><span class=string> - raw_cmd</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string> Use `;` for comments.</span></span><br><span class=line><span class=string>'''</span></span><br><span class=line>REGS = {</span><br><span class=line>    <span class=string>'T0'</span>: <span class=number>0</span>,</span><br><span class=line>    <span class=string>'T1'</span>: <span class=number>1</span>,</span><br><span class=line>    <span class=string>'T2'</span>: <span class=number>2</span>,</span><br><span class=line>    <span class=string>'T3'</span>: <span class=number>3</span>,</span><br><span class=line>    <span class=string>'S0'</span>: <span class=number>4</span>,</span><br><span class=line>    <span class=string>'S1'</span>: <span class=number>5</span>,</span><br><span class=line><span class=comment>#    'SP': 6,</span></span><br><span class=line>    <span class=string>'IO'</span>: <span class=number>6</span>,</span><br><span class=line>}</span><br><span class=line></span><br><span class=line>CMDS = {</span><br><span class=line>    <span class=comment># CALC CMDS</span></span><br><span class=line>    <span class=string>'OR'</span>:   <span class=number>0b01_000_000</span>,</span><br><span class=line>    <span class=string>'NAND'</span>: <span class=number>0b01_000_001</span>,</span><br><span class=line>    <span class=string>'NOR'</span>:  <span class=number>0b01_000_010</span>,</span><br><span class=line>    <span class=string>'AND'</span>:  <span class=number>0b01_000_011</span>,</span><br><span class=line>    <span class=string>'ADD'</span>:  <span class=number>0b01_000_100</span>,</span><br><span class=line>    <span class=string>'SUB'</span>:  <span class=number>0b01_000_101</span>,</span><br><span class=line>    <span class=comment># COND CMDS</span></span><br><span class=line>    <span class=string>'EQ0'</span>:  <span class=number>0b11_000_001</span>,</span><br><span class=line>    <span class=string>'LT0'</span>:  <span class=number>0b11_000_010</span>,</span><br><span class=line>    <span class=string>'LTEQ0'</span>:<span class=number>0b11_000_011</span>,</span><br><span class=line>    <span class=string>'JMP'</span>:  <span class=number>0b11_000_100</span>,</span><br><span class=line>    <span class=string>'NEQ0'</span>: <span class=number>0b11_000_101</span>,</span><br><span class=line>    <span class=string>'GTEQ0'</span>:<span class=number>0b11_000_110</span>,</span><br><span class=line>    <span class=string>'GT0'</span>:  <span class=number>0b11_000_111</span>,</span><br><span class=line>    <span class=comment># MEM CMDS; NOT USED HERE</span></span><br><span class=line> <span class=comment>#  'SW':   0b01_000_110,</span></span><br><span class=line> <span class=comment>#  'LW':   0b01_000_111,</span></span><br><span class=line>}</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>def</span> <span class="title function_">digit</span>(<span class=params>op: <span class=built_in>str</span></span>):</span><br><span class=line>    <span class=keyword>try</span>:</span><br><span class=line>        i = <span class=built_in>int</span>(op, base=<span class=number>0</span>)</span><br><span class=line>    <span class=keyword>except</span> ValueError:</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>None</span></span><br><span class=line>    <span class=keyword>return</span> i</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>def</span> <span class="title function_">register</span>(<span class=params>reg: <span class=built_in>str</span></span>):</span><br><span class=line>    <span class=keyword>if</span> reg <span class=keyword>in</span> REGS.keys():</span><br><span class=line>        <span class=keyword>return</span> REGS.get(reg)</span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> reg.startswith(<span class=string>'R'</span>):</span><br><span class=line>        reg = reg.strip(<span class=string>'R'</span>)</span><br><span class=line>    <span class=keyword>if</span> reg.startswith(<span class=string>'REG'</span>):</span><br><span class=line>        reg = reg.strip(<span class=string>'REG'</span>)</span><br><span class=line>    <span class=keyword>if</span> reg.startswith(<span class=string>'$'</span>):</span><br><span class=line>        reg = reg.strip(<span class=string>'$'</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>try</span>:</span><br><span class=line>        i = <span class=built_in>int</span>(reg.strip(<span class=string>'R'</span>))</span><br><span class=line>        <span class=keyword>if</span> i>=<span class=number>0</span> <span class=keyword>and</span> i<<span class=number>8</span>:</span><br><span class=line>            <span class=keyword>return</span> i</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=keyword>return</span> <span class=literal>None</span></span><br><span class=line>    <span class=keyword>except</span> ValueError:</span><br><span class=line>        <span class=keyword>return</span> <span class=literal>None</span></span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>def</span> <span class="title function_">_macro</span>(<span class=params>instr: <span class=built_in>str</span></span>):</span><br><span class=line>    <span class=string>'''</span></span><br><span class=line><span class=string>    convert defs into its defination.</span></span><br><span class=line><span class=string>    '''</span></span><br><span class=line></span><br><span class=line>    defs = <span class=built_in>dict</span>()</span><br><span class=line></span><br><span class=line>    ops = instr.upper().split(<span class=string>'\n'</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>for</span> ind, op <span class=keyword>in</span> <span class=built_in>enumerate</span>(ops):</span><br><span class=line>        op = op.strip()</span><br><span class=line>        <span class=keyword>if</span> <span class=keyword>not</span> op: <span class=keyword>continue</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>';'</span>): <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>'#'</span>):</span><br><span class=line>            op = op.strip(<span class=string>'#'</span>).strip()</span><br><span class=line>        <span class=keyword>if</span>  op.startswith(<span class=string>'DEFINE'</span>):</span><br><span class=line>            _defs = op.split()</span><br><span class=line>            <span class=keyword>if</span> <span class=built_in>len</span>(_defs) < <span class=number>3</span>:</span><br><span class=line>                <span class=keyword>raise</span> SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `#DEFINE` should follow with an identifier and a const.'</span>)</span><br><span class=line>            _name = _defs[<span class=number>1</span>].strip()</span><br><span class=line>            _const = <span class=string>' '</span>.join(_defs[<span class=number>2</span>:]).strip()</span><br><span class=line>            <span class=keyword>if</span> <span class=keyword>not</span> _name <span class=keyword>or</span> <span class=keyword>not</span> _const:</span><br><span class=line>                <span class=keyword>raise</span> SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `#DEFINE` should follow with an identifier and a const.'</span>)</span><br><span class=line>            <span class=keyword>if</span> _name <span class=keyword>in</span> defs.keys():</span><br><span class=line>                <span class=keyword>raise</span> SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: Multiple definition of #DEFINE `<span class=subst>{_name}</span>`.'</span>)</span><br><span class=line>            defs[_name] = _const</span><br><span class=line></span><br><span class=line>    replaced = <span class=built_in>list</span>()</span><br><span class=line>    lines = instr.upper().split(<span class=string>'\n'</span>)</span><br><span class=line>    <span class=keyword>for</span> l <span class=keyword>in</span> lines:</span><br><span class=line>        tokens = [defs.get(t, t) <span class=keyword>for</span> t <span class=keyword>in</span> l.split()]</span><br><span class=line>        replaced.append(<span class=string>' '</span>.join(tokens).strip())</span><br><span class=line>    <span class=keyword>return</span> <span class=string>'\n'</span>.join(replaced).strip()</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>def</span> <span class="title function_">_compile</span>(<span class=params>instr: <span class=built_in>str</span></span>):</span><br><span class=line>    <span class=string>'''</span></span><br><span class=line><span class=string>    Compile asm into binarys.</span></span><br><span class=line><span class=string>    '''</span></span><br><span class=line>    <span class=built_in>bin</span> = <span class=built_in>list</span>() <span class=comment># binary code</span></span><br><span class=line>    labels = <span class=built_in>dict</span>()</span><br><span class=line></span><br><span class=line>    pc = <span class=number>0</span> <span class=comment># prog counter</span></span><br><span class=line>    errs = <span class=built_in>list</span>()</span><br><span class=line></span><br><span class=line>    ops = instr.upper().split(<span class=string>'\n'</span>)</span><br><span class=line></span><br><span class=line>    <span class=keyword>for</span> ind, op <span class=keyword>in</span> <span class=built_in>enumerate</span>(ops):</span><br><span class=line>        op = op.strip()</span><br><span class=line>        <span class=keyword>if</span> <span class=keyword>not</span> op: <span class=keyword>continue</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>';'</span>): <span class=keyword>continue</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>'#'</span>): <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>        <span class=comment># parsing command</span></span><br><span class=line>        <span class=keyword>if</span> op <span class=keyword>in</span> CMDS.keys():</span><br><span class=line>             <span class=built_in>bin</span>.append(CMDS.get(op))</span><br><span class=line>             pc += <span class=number>1</span></span><br><span class=line>             <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>        <span class=comment># parsing label</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>'LABEL'</span>):</span><br><span class=line>            <span class=keyword>if</span> <span class=built_in>len</span>(op.split(<span class=string>'LABEL'</span>)) < <span class=number>2</span>:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `LABEL` should follow an identifier.'</span>))</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line>            _label = op.split(<span class=string>'LABEL'</span>)[<span class=number>1</span>].strip()</span><br><span class=line>            <span class=keyword>if</span> <span class=keyword>not</span> _label:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `LABEL` should follow with an identifier.'</span>))</span><br><span class=line>            <span class=keyword>elif</span> labels.get(_label):</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: Multiple definition of LABEL `<span class=subst>{_label}</span>`.'</span>))</span><br><span class=line>            <span class=keyword>else</span>:</span><br><span class=line>                labels[_label] = pc</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>        <span class=keyword>if</span> op <span class=keyword>in</span> labels.keys():</span><br><span class=line>            _pc_ind = labels.get(op)</span><br><span class=line>            <span class=keyword>if</span> _pc_ind > <span class=number>63</span>:</span><br><span class=line>                errs.append(IndexError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: LABEL index out of range (0~63).'</span>))</span><br><span class=line>            <span class=keyword>elif</span> _pc_ind == <span class=number>0x00</span>:</span><br><span class=line>                errs.append(IndexError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: LABEL index should not be zero.'</span>))</span><br><span class=line>            <span class=built_in>bin</span>.append(labels.get(op))</span><br><span class=line>            pc += <span class=number>1</span></span><br><span class=line>            <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line></span><br><span class=line>        <span class=comment># parse mov</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>'MOV'</span>):</span><br><span class=line>            _regs = op.split()</span><br><span class=line>            <span class=keyword>if</span> <span class=built_in>len</span>(_regs) != <span class=number>3</span>:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `MOV` should follow with two regs.'</span>))</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line>            _reg_src = register(_regs[<span class=number>1</span>].strip())</span><br><span class=line>            _reg_dst = register(_regs[<span class=number>2</span>].strip())</span><br><span class=line>            <span class=keyword>if</span> _reg_src <span class=keyword>is</span> <span class=keyword>not</span> <span class=literal>None</span> <span class=keyword>and</span> _reg_dst <span class=keyword>is</span> <span class=keyword>not</span> <span class=literal>None</span>:</span><br><span class=line>                _cmd = <span class=number>0x80</span> | _reg_src << <span class=number>3</span> | _reg_dst</span><br><span class=line>                <span class=built_in>bin</span>.append(_cmd)</span><br><span class=line>                pc += <span class=number>1</span></span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line>            <span class=keyword>else</span>:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `MOV` should follow with two regs.'</span>))</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>        <span class=comment># parse imme</span></span><br><span class=line>        <span class=keyword>if</span> op.startswith(<span class=string>'IMME'</span>):</span><br><span class=line>            _imme = op.replace(<span class=string>'IMME'</span>, <span class=string>''</span>).strip()</span><br><span class=line>            _imme = digit(_imme)</span><br><span class=line>            <span class=keyword>if</span> _imme <span class=keyword>is</span> <span class=literal>None</span>:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: `IMME` should follow with an integer.'</span>))</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line>            <span class=keyword>if</span> _imme >= <span class=number>0</span> <span class=keyword>or</span> _imme < <span class=number>64</span>:</span><br><span class=line>                <span class=built_in>bin</span>.append(_imme)</span><br><span class=line>                pc += <span class=number>1</span></span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line>            <span class=keyword>else</span>:</span><br><span class=line>                errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: Immediate number out of range (0~63).'</span>))</span><br><span class=line>                <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line></span><br><span class=line>        <span class=comment># parse raw</span></span><br><span class=line>        _raw = digit(op)</span><br><span class=line>        <span class=keyword>if</span> _raw <span class=keyword>is</span> <span class=literal>None</span>:</span><br><span class=line>            errs.append(SyntaxError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: Unidentified instruction `<span class=subst>{op}</span>`.'</span>))</span><br><span class=line>        <span class=keyword>elif</span> _raw > <span class=number>255</span> <span class=keyword>or</span> _raw < <span class=number>0</span>:</span><br><span class=line>            errs.append(IndexError(<span class=string>f'Line <span class=subst>{ind+<span class=number>1</span>}</span>: Command out of range 0~255.'</span>))</span><br><span class=line>        <span class=keyword>else</span>:</span><br><span class=line>            <span class=built_in>bin</span>.append(_raw)</span><br><span class=line>            pc += <span class=number>1</span></span><br><span class=line>            <span class=keyword>continue</span></span><br><span class=line></span><br><span class=line>    <span class=keyword>if</span> <span class=keyword>not</span> errs:</span><br><span class=line>        <span class=keyword>return</span> <span class=number>0</span>, <span class=built_in>bin</span></span><br><span class=line>    <span class=keyword>else</span>:</span><br><span class=line>        <span class=keyword>return</span> -<span class=number>1</span>, errs</span><br><span class=line></span><br><span class=line></span><br><span class=line><span class=keyword>if</span> __name__ == <span class=string>'__main__'</span>:</span><br><span class=line>    code = <span class=string>r'''</span></span><br><span class=line><span class=string>    ; Example code for this tiny assembler,</span></span><br><span class=line><span class=string>    ; The Maze</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>    ; forward a step</span></span><br><span class=line><span class=string>    ; turn left</span></span><br><span class=line><span class=string>    ; if left is wall:</span></span><br><span class=line><span class=string>    ; turn right till not wall</span></span><br><span class=line><span class=string>    ; goto 1</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>    # define left 0</span></span><br><span class=line><span class=string>    # define forward 1</span></span><br><span class=line><span class=string>    # define right 2</span></span><br><span class=line><span class=string>    # define pass 3</span></span><br><span class=line><span class=string>    # define interact 4</span></span><br><span class=line><span class=string>    # define wall 1</span></span><br><span class=line><span class=string>    # define hlt 0b10_100_100</span></span><br><span class=line><span class=string></span></span><br><span class=line><span class=string>    hlt</span></span><br><span class=line><span class=string>    label start</span></span><br><span class=line><span class=string>    imme forward</span></span><br><span class=line><span class=string>    mov t0 io</span></span><br><span class=line><span class=string>    imme left</span></span><br><span class=line><span class=string>    mov t0 io</span></span><br><span class=line><span class=string>    label read_input</span></span><br><span class=line><span class=string>    mov io t3</span></span><br><span class=line><span class=string>    start</span></span><br><span class=line><span class=string>    eq0</span></span><br><span class=line><span class=string>    right</span></span><br><span class=line><span class=string>    mov t0 io</span></span><br><span class=line><span class=string>    interact</span></span><br><span class=line><span class=string>    mov t0 io</span></span><br><span class=line><span class=string>    read_input</span></span><br><span class=line><span class=string>    jmp</span></span><br><span class=line><span class=string>    '''</span></span><br><span class=line>    asm = _macro(code)</span><br><span class=line>    code, arr = _<span class=built_in>compile</span>(asm)</span><br><span class=line>    <span class=keyword>if</span> code == <span class=number>0</span>:</span><br><span class=line>        <span class=keyword>for</span> b <span class=keyword>in</span> arr:</span><br><span class=line>            <span class=built_in>print</span>(b, end=<span class=string>' '</span>)</span><br><span class=line>    <span class=keyword>else</span>:</span><br><span class=line>        <span class=keyword>for</span> err <span class=keyword>in</span> arr:</span><br><span class=line>            <span class=built_in>print</span>(err)</span><br><span class=line>    <span class=built_in>print</span>()</span><br></pre></table></figure></div><footer class=post-footer><div class=reward-container><div>我很可爱，请给我钱！</div><button>赞赏</button><div class=post-reward><div><img alt="Tarik Von 微信" src=/images/wechatpay.png><span>微信</span></div></div></div><div class=post-tags><a href=/tags/Assembly/ rel=tag># Assembly</a><a href=/tags/Architecture/ rel=tag># Architecture</a><a href=/tags/Programming/ rel=tag># Programming</a><a href=/tags/CPU/ rel=tag># CPU</a><a href=/tags/OVERTURE/ rel=tag># OVERTURE</a></div><div class=post-nav><div class=post-nav-item><a href=/2024/05/25/MIPS/ rel=prev title=MIPS精简指令集一览表（共31条）> <i class="fa fa-angle-left"></i> MIPS精简指令集一览表（共31条） </a></div><div class=post-nav-item><a title="Notes: INFO-200: Information Systems Analysis (Spring, 2024)" href=/2024/07/07/info-200/ rel=next> Notes: INFO-200: Information Systems Analysis (Spring, 2024) <i class="fa fa-angle-right"></i> </a></div></div></footer></article></div></div></main><footer class=footer><div class=footer-inner><div class=copyright>© <span itemprop=copyrightYear>2025</span><span class=with-love> <i class="fa fa-heart"></i> </span><span class=author itemprop=copyrightHolder>Tarik Von</span><span> </span><a href=https://beian.miit.gov.cn/ target=_blank>闽ICP备2025086651号-1</a></div><div class=wordcount><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-chart-line"></i> </span> <span title=站点总字数>42k</span> </span><span class=post-meta-item> <span class=post-meta-item-icon> <i class="fa fa-coffee"></i> </span> <span title=站点阅读时长>2:32</span> </span></div><div class=powered-by>由 <a href=https://www.tarikvon.cn:8001/>Hexo</a> & <a href=https://theme-next.js.org/pisces/ rel=noopener target=_blank>NexT.Pisces</a> 强力驱动</div><script color=126,0,255 count=99 opacity=0.5 src=/lib/theme-next-canvas-nest/canvas-nest.js zindex=-1></script></div></footer><div aria-label=返回顶部 class=back-to-top role=button><i class="fa fa-arrow-up fa-lg"></i><span>0%</span></div><div class=reading-progress-bar></div><noscript><div class=noscript-warning>Theme NexT works best with JavaScript enabled</div></noscript><script alpha=0.6 size=300 src=https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js zindex=-1></script><script crossorigin=anonymous integrity=sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY= src=https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js></script><script crossorigin=anonymous integrity=sha256-vxLn1tSKWD4dqbMRyv940UYw4sXgMtYcK6reefzZrao= src=https://cdnjs.cloudflare.com/ajax/libs/next-theme-pjax/0.6.0/pjax.min.js></script><script src=/js/comments.js></script><script src=/js/utils.js></script><script src=/js/motion.js></script><script src=/js/next-boot.js></script><script src=/js/pjax.js></script><script class=next-config data-name=enableMath type=application/json>false</script><link crossorigin=anonymous href=https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.9/katex.min.css integrity=sha256-UF1fgpAiu3tPJN/uCqEUHNe7pnr+QR0SQDNfgglgtcM= rel=stylesheet>